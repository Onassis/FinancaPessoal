<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://cdn.datatables.net/2.0.7/css/dataTables.dataTables.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>	 
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js" integrity="sha512-+k1pnlgt4F1H8L7t3z95o3/KO+o78INEcXTbnoJQ/F2VqDVhWoaiVml/OEHv9HsVgxUaVW+IbiZPUJQfF/YxZw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.datatables.net/2.0.7/js/dataTables.js"></script>
	<script src="http://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>
</head>
<main id="main" class="main" layout:fragment="corpo">
     <div class="row">
          <div class="col-lg-12">
            <ol class="breadcrumb">
              <li><i class="fa fa-home"></i><a href="home.html"> Home </a></li>
              <li>  <i class="fa fa-bars"></i> Listar Contas </li>
            </ol>
          </div>
     </div>		
	<nav class="navbar navbar-expand-md bg-light">
			<div class="collapse navbar-collapse" id="navbarsExampleDefault">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<i class="oi oi-caret-right"></i>
						<span>Lista de Contas</span>
					</li>
				</ul>
			</div>
			<a id="btnadd" class="btn btn-primary btn-md" rel="modal:open" th:href="@{/conta/cadastrar}" role="button"> 
			 	<span 	class="oi oi-plus" title="Cadastro" aria-hidden="true"></span> 
			 	<span>Nova Conta</span>
			</a>
	</nav>
	
<!----------------------------------------- alerta ---------------------------------------------------->				
			<div class="alert alert-dismissible  fade show" style="display: none;" 	role="alert">
				<strong>Alerta!</strong>
				<p>Favor verificar o suporte.</p>
				<button type="button" class="btn-close" data-bs-dismiss="alert"
					aria-label="Close"></button>
			</div>
<!-------------------------------------------------- Lista ------------------------------------------------>	
	  	<div class="Containner">
	  	<div class="row">
				<div class="card">
					<div class="table-responsive" >				
							<table id ="myTable "class="table table-bordered table-striped table-hover ">
								<thead class="thead-light">
									<tr>
							 			<th pages:sort="apelido">Apelido Conta</th>
										<th pages:sort="tipoConta.descricao">Tipo</th>
										<th pages:sort="instituicao">Instituição</th>
										<th pages:sort="agencia">Agência</th>
										<th pages:sort="numero">Número</th>
										<th align-text="center">Dia do Venc.</th>
										<th align-text="center">Melhor Dia Compra</th>
										<th pages:sort="moedas?.codigo">Moeda</th>
										<th pages:sort="saldo">Saldo</th>
										<th pages:sort="inativo">Inativo</th>
				
									</tr>
								</thead>
								 <tbody th:remove="all-but-first">
										 <tr th:each="c : ${conta}">
											<td th:text="${c.apelido}"> </td>
											<td th:text="${c.tipoConta.descricao}">Auxiliar Contábil</td>
											<td th:text="${c.instituicao}">Contabilidade</td>
											<td align="right"  th:text="${c.agencia}">Contabilidade</td>
											<td align="right" th:text="${c.numero}">Numero Conta</td>
											<td align="center" th:text="${c.diaVencimento}">Dia Vencimento</td>
											<td align="center" th:text="${c.diaComp}">Dia compra</td>
											<td align="center" th:text="${c?.moeda?.codigo}">Moeda</td>
											<td align="right" id="saldo" th:text="|R$ ${{c.saldo}}|">saldo</td>
											<td align="center">
												<a th:if="${c.inativo == true}" class="fa-regular fa-square-check" title="Conta inativa"></a>
  												<a th:if="${c.inativo == false}" class="fa-regular fa-square" style="color: #ced6de" title="Conta ativa"></a>											
											</td>
																
															
										</tr>
									</tbody>
							</table>
					 	</div>							
				</div>
		</div>
</div>		
</main>  
</html>


<script>
$(document).ready(function () {
	console.log("inicio") 
    var table = $('#myTable').DataTable();

    table.MakeCellsEditable({
        "onUpdate": myCallbackFunction
    });
});
function myCallbackFunction(updatedCell, updatedRow, oldValue) {
    console.log("The new value for the cell is: " + updatedCell.data());
    console.log("The old value for that cell was: " + oldValue);
    console.log("The values for each cell in that row are: " + updatedRow.data());
}
</script>